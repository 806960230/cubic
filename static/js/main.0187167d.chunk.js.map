{"version":3,"sources":["auth-provider.ts","utils/http.ts","utils/index.ts","utils/use-async.ts","components/lib.tsx","context/auth-context.tsx","components/pin.tsx","utils/use-optimistic-options.ts","utils/project.ts","utils/url.ts","screens/project-list/util.ts","screens/project-list/list.tsx","utils/user.ts","components/id-select.tsx","components/user-select.tsx","screens/project-list/search-panel.tsx","screens/project-list/index.tsx","utils/kanban.ts","utils/task.ts","screens/kanban/util.ts","utils/task-type.ts","components/task-type-select.tsx","screens/kanban/search-panel.tsx","assets/task.png","screens/kanban/create-task.tsx","components/mark.tsx","screens/kanban/kanban-column.tsx","assets/bug.png","screens/kanban/create-kanban.tsx","screens/kanban/task-modal.tsx","screens/kanban/index.tsx","screens/epic/util.ts","screens/epic/create-epic.tsx","utils/epic.ts","screens/epic/index.tsx","screens/project/index.tsx","screens/project-list/project-modal.tsx","components/project-popover.tsx","components/user-popover.tsx","assets/cubic.png","authenticated-app.tsx","unauthenticated-app/login.tsx","unauthenticated-app/register.tsx","assets/left.svg","assets/right.svg","unauthenticated-app/index.tsx","components/error-boundary.tsx","App.tsx","reportWebVitals.ts","context/index.tsx","index.tsx"],"names":["apiUrl","process","localStorageKey","handleUserResponse","_ref","user","window","localStorage","setItem","token","logout","async","removeItem","http","endpoint","data","headers","customConfig","arguments","length","undefined","config","method","Authorization","concat","toUpperCase","qs","stringify","body","JSON","fetch","then","response","status","auth","location","reload","Promise","reject","message","json","ok","useHttp","useAuth","_len","Array","_key","cleanObject","object","result","Object","keys","forEach","key","value","isVoid","useDebounce","delay","debouncedValue","setDebouncedValue","useState","useEffect","timeout","setTimeout","clearTimeout","resetRoute","href","origin","useMountedRef","mountedRef","useRef","current","defaultInitialState","stat","error","defaultConfig","throwOnError","useAsync","initialState","initialConfig","state","dispatch","useReducer","action","safeDispatch","useCallback","useSafeDispatch","retry","setRetry","setData","setError","run","promise","runConfig","Error","console","log","catch","isIdle","isLoading","isError","isSuccess","Row","styled","div","_templateObject","_taggedTemplateLiteral","props","between","marginBottom","gap","FullPage","_templateObject2","FullPageLoading","_jsx","children","Spin","size","ErrorBox","Typography","Text","type","FullPageErrorFallback","_ref2","_jsxs","DevTools","ButtonNoPadding","Button","_templateObject3","ScreenContainer","_templateObject4","AuthContext","React","createContext","displayName","bootstrapUser","getItem","AuthProvider","setUser","queryClient","useQueryClient","callback","Provider","login","form","register","clear","context","useContext","Pin","checked","onCheckedChange","restProps","Rate","count","onChange","num","useConfig","queryKey","onSuccess","invalidateQueries","onMutate","target","previousItems","getQueryData","setQueryData","old","onError","newItem","useDeleteConfig","filter","item","id","useEditConfig","map","useAddConfig","useProjects","param","client","useQuery","useProject","enabled","Boolean","useEditProject","useMutation","params","useAddProject","useUrlQueryParam","searchParams","setSearchParams","useSearchParams","useMemo","reduce","prev","get","o","fromEntries","useSetUrlSearchParam","setSearchParam","useProjectsSearchParams","setParam","personId","Number","useProjectsQueryKey","useProjectModal","projectCreate","setProjectCreate","editingProjectId","setEditingProjectId","setUrlParams","editingProject","projectModalOpen","open","close","startEdit","List","users","mutate","Table","rowKey","pagination","columns","title","disabled","render","project","pin","sorter","a","b","name","localeCompare","Link","to","String","dataIndex","_users$find","find","created","dayjs","format","More","deleteProject","useDeleteProject","Dropdown","overlay","Menu","Item","onClick","Modal","confirm","content","okText","onOk","confirmDeleteProject","useUsers","IdSelect","defaultOptionName","options","Select","toNumber","Option","option","isNaN","UserSelect","SearchPanel","Form","style","layout","Input","placeholder","evt","ProjectListScreen","list","Container","padding","loading","dataSource","whyDidYouRender","useKanbans","useTasks","useProjectIdInUrl","_pathname$match","pathname","useLocation","match","useKanbanSearchParams","projectId","useKanbansQueryKey","useTasksSearchParams","debouncedName","typeId","processorId","tagId","useTasksQueryKey","useTasksModal","editingTaskId","setEditingTaskId","editingTask","useTask","useTaskTypes","TaskTypeSelect","taskTypes","width","reset","CreateTask","kanbanId","mutateAsync","addTask","useAddTask","setName","inputMode","setInputMode","toggle","mode","Card","onBlur","autoFocus","onPressEnter","Mark","keyword","_Fragment","arr","split","str","index","color","TaskTypeIcon","_taskTypes$find","taskType","height","src","TaskCard","task","cursor","KanbanColumn","_ref3","kanban","allTasks","tasks","TasksContainer","taskIndex","_ref4","useDeleteKanban","cancelText","CreateKanban","addKanban","useAddKanban","labelCol","span","wrapperCol","TaskModal","useForm","editTask","editLoading","useEditTask","deleteTask","useDeleteTask","setFieldsValue","forceRender","onCancel","resetFields","getFieldsValue","confirmLoading","visible","initialValues","label","rules","required","textAlign","startDelete","fontSize","KanbanScreen","currentProject","kanbans","kanbanIsLoading","taskIsLoading","Helmet","ColumnsContainer","useEpicSearchParams","useEpicsQueryKey","CreateEpic","addEpic","useAddEpic","Drawer","onClose","destroyOnClose","onFinish","values","TextArea","htmlType","EpicScreen","epics","epicIsLoading","useEpics","deleteEpic","useDeleteEpic","epicCreateOpen","setEpicCreateOpen","justify","overflow","itemLayout","renderItem","epic","Meta","confirmDeleteEpic","description","start","end","epicId","ProjectScreen","routeType","useRouteType","units","Aside","selectedKeys","Main","Routes","Route","path","element","Navigate","replace","aside","ProjectModal","useMutateProject","mutateLoading","closeModal","ProjectPopover","projects","refetch","pinnedProjects","ContentContainer","Divider","Popover","onVisibleChange","placement","BigText","CreateUser","addUser","useAddUsers","UserPopover","AuthenticatedApp","Router","PageHeader","Header","HeaderLeft","cubicLogo","marginTop","MiddleText","HeaderRight","User","e","preventDefault","h3","_templateObject5","main","_templateObject6","_templateObject7","_templateObject8","LoginScreen","nav","_templateObject9","_templateObject10","footer","_templateObject11","LongButton","RegisterScreen","cpassword","password","UnauthenticatedApp","isRegister","setIsRegister","display","justifyContent","Background","ShadowCard","logo","Title","h2","left","right","header","ErrorBoundary","Component","constructor","getDerivedStateFromError","this","fallbackRender","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","AppProviders","QueryClientProvider","QueryClient","loadServer","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0187167d.chunk.js","sourcesContent":["import { User } from \"screens/project-list/search-panel\";\r\nimport * as qs from \"qs\";\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nconst localStorageKey = \"__auth_provider_token__\";\r\n\r\nexport const getToken = () => window.localStorage.getItem(localStorageKey);\r\n\r\nexport const handleUserResponse = ({ user }: { user: User }) => {\r\n  window.localStorage.setItem(localStorageKey, user.token || \"\");\r\n  return user;\r\n};\r\n\r\nexport const login = (data: { username: string; password: string }) => {\r\n  return fetch(`${apiUrl}/login?`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  }).then(async (response) => {\r\n    if (response.ok) {\r\n      return handleUserResponse(await response.json());\r\n      // setList(await response.json())\r\n    } else {\r\n      return Promise.reject(await response.json());\r\n    }\r\n  });\r\n};\r\n\r\nexport const register = (data: { username: string; password: string }) => {\r\n  return fetch(`${apiUrl}/register?`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  }).then(async (response) => {\r\n    if (response.ok) {\r\n      return handleUserResponse(await response.json());\r\n      // setList(await response.json())\r\n    } else {\r\n      return Promise.reject(await response.json());\r\n    }\r\n  });\r\n};\r\n\r\nexport const logout = async () =>\r\n  await window.localStorage.removeItem(localStorageKey);\r\n","import qs from \"qs\";\r\nimport * as auth from \"auth-provider\";\r\nimport { useAuth } from \"context/auth-context\";\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\ninterface Config extends RequestInit {\r\n  token?: string;\r\n  data?: object;\r\n}\r\n\r\nexport const http = async (\r\n  endpoint: string,\r\n  { data, token, headers, ...customConfig }: Config = {},\r\n) => {\r\n  const config = {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: token ? `Bearer ${token}` : \"\",\r\n      \"Content-Type\": data ? \"application/json\" : \"\",\r\n    },\r\n    ...customConfig,\r\n  };\r\n  if (config.method.toUpperCase() === \"GET\") {\r\n    endpoint += `?${qs.stringify(data)}`;\r\n  } else {\r\n    config.body = JSON.stringify(data || {});\r\n  }\r\n  return window\r\n    .fetch(`${apiUrl}/${endpoint}`, config)\r\n    .then(async (response) => {\r\n      if (response.status === 401) {\r\n        await auth.logout();\r\n        window.location.reload();\r\n        return Promise.reject({ message: \"请重新登录\" });\r\n      }\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        return data;\r\n      } else {\r\n        return Promise.reject(data);\r\n      }\r\n    });\r\n};\r\n\r\nexport const useHttp = () => {\r\n  const { user } = useAuth();\r\n  return (...[endpoint, config]: [string, Config]) =>\r\n    http(endpoint, { ...config, token: user?.token });\r\n};\r\n","import { useEffect, useState, useRef } from \"react\";\r\n\r\nexport const isFalsy = (value: any) => (value === 0 ? false : !value);\r\n\r\nexport const isVoid = (value: unknown) =>\r\n  value === undefined || value === null || value === \"\";\r\n\r\nexport const cleanObject = (object: { [key: string]: unknown }) => {\r\n  const result = { ...object };\r\n  Object.keys(result).forEach((key) => {\r\n    //@ts-ignore\r\n    const value = object[key];\r\n    if (isVoid(value)) {\r\n      //@ts-ignore\r\n      delete result[key];\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nexport const useMount = (callback: () => void) => {\r\n  useEffect(() => {\r\n    callback();\r\n  }, []);\r\n};\r\n\r\nexport const useDebounce = <V>(value: V, delay?: number) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => setDebouncedValue(value), delay);\r\n    return () => clearTimeout(timeout);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n};\r\n\r\nexport const resetRoute = () => (window.location.href = window.location.origin);\r\n\r\n// 返回组件的挂载状态，如果还没挂载或者已经卸载，返回false, 反之返回true\r\nexport const useMountedRef = () => {\r\n  const mountedRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  });\r\n  return mountedRef;\r\n};\r\n\r\n\r\nexport const useArray = <T>(params: T []) => {\r\n   \r\n  const [value, setValue] = useState(params);\r\n  \r\n\r\n  const clear = () => {\r\n     setValue([])\r\n  }\r\n\r\n  const removeIndex = (index: number) => {\r\n      let arr = [...value];\r\n      arr.splice(index, 1 );\r\n      console.log('删除了哪个', arr)\r\n      setValue(arr);\r\n  }\r\n\r\n  const add = (parm: T) => {\r\n    setValue([...value, parm]);\r\n  }\r\n\r\n\r\n\r\n  return {\r\n    value, \r\n    clear, \r\n    removeIndex, \r\n    add\r\n  }\r\n}\r\n","import { useState, useReducer, useCallback } from \"react\";\nimport { useMountedRef } from \"utils\";\n\ninterface State<D> {\n  error: Error | null;\n  data: D | null;\n  stat: \"idle\" | \"loading\" | \"error\" | \"success\";\n}\n\nconst defaultInitialState: State<null> = {\n  stat: \"idle\",\n  data: null,\n  error: null,\n};\n\nconst defaultConfig = {\n  throwOnError: false,\n};\n\nconst useSafeDispatch = <T>(dispatch: (...args: T[]) => void) => {\n  const mountedRef = useMountedRef();\n  return useCallback(\n    (...args: T[]) => (mountedRef.current ? dispatch(...args) : void 0),\n    [dispatch, mountedRef],\n  );\n};\n\nexport const useAsync = <D>(\n  initialState?: State<D>,\n  initialConfig?: typeof defaultConfig,\n) => {\n  const config = { ...defaultConfig, initialConfig };\n  const [state, dispatch] = useReducer(\n    (state: State<D>, action: Partial<State<D>>) => ({ ...state, ...action }),\n    {\n      ...defaultInitialState,\n      ...initialState,\n    },\n  );\n  const mountedRef = useMountedRef()\n\n  //     <State<D>>({\n  //     ...defaultInitialState,\n  //     ...initialState\n  // })\n  const safeDispatch = useSafeDispatch(dispatch);\n  //useState 直接传入函数的含义是: 惰性初始化，所以要用useState保存函数，不能直接传入函数\n  const [retry, setRetry] = useState(() => () => {});\n  const setData = useCallback(\n    (data: D) =>\n      safeDispatch({\n        data,\n        stat: \"success\",\n        error: null,\n      }),\n    [safeDispatch],\n  );\n\n  const setError = useCallback(\n    (error: Error) =>\n      safeDispatch({\n        error,\n        stat: \"error\",\n        data: null,\n      }),\n    [safeDispatch],\n  );\n\n  // useMemo 与useCallback 功能一样的，主要用在依赖项里不是基本类型的数据\n\n  // run 用来触发异步请求\n  const run = useCallback(\n    (promise: Promise<D>, runConfig?: { retry: () => Promise<D> }) => {\n      if (!promise || !promise.then) {\n        throw new Error(\"请传入 Promise 类型数据\");\n      }\n      setRetry(() => () => {\n        console.log(\"set retry\");\n        if (runConfig?.retry) {\n          run(runConfig?.retry(), runConfig);\n        }\n      });\n      safeDispatch({ stat: \"loading\" });\n      return promise\n        .then((data) => {\n          if(mountedRef.current)\n          setData(data);\n          return data;\n        })\n        .catch((error) => {\n          setError(error);\n          if (config.throwOnError) return Promise.reject(error);\n          return error;\n        });\n    },\n    [config.throwOnError, setData, setError, safeDispatch],\n  );\n  // const run = (\n  //     promise: Promise<D>,\n  //     runConfig?: { retry: () => Promise<D> },\n  // ) => {\n  //     if (!promise || !promise.then) {\n  //         throw new Error(\"请传入 Promise 类型数据\");\n  //     }\n  //     setRetry(() => () => {\n  //         console.log(\"set retry\");\n  //         if (runConfig?.retry) {\n  //             run(runConfig?.retry(), runConfig);\n  //         }\n  //     });\n  //     safeDispatch({ stat: \"loading\" });\n  //     return promise\n  //         .then((data) => {\n  //             setData(data);\n  //             return data;\n  //         })\n  //         .catch((error) => {\n  //             setError(error);\n  //             if (config.throwOnError) return Promise.reject(error);\n  //             return error;\n  //         });\n  // };\n\n  return {\n    isIdle: state.stat === \"idle\",\n    isLoading: state.stat === \"loading\",\n    isError: state.stat === \"error\",\n    isSuccess: state.stat === \"success\",\n    run,\n    setData,\n    setError,\n    retry,\n    ...state,\n  };\n};\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Spin, Typography, Button } from \"antd\";\r\nimport { loadServer, DevTools } from \"jira-dev-tool\";\r\nexport const Row = styled.div<{\r\n  gap?: number | boolean;\r\n  between?: boolean;\r\n  marginBottom?: number;\r\n}>`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: ${(props) => (props.between ? \"space-between\" : undefined)};\r\n  margin-bottom: ${(props) => props.marginBottom + \"rem\"} > * {\r\n    margin-top: 0 !important;\r\n    margin-bottom: 0 !important;\r\n    margin-right: ${(props) =>\r\n    typeof props.gap === \"number\"\r\n      ? props.gap + \"rem\"\r\n      : props.gap\r\n        ? \"2rem\"\r\n        : undefined};\r\n  }\r\n`;\r\n\r\nconst FullPage = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport const FullPageLoading = () => (\r\n  <FullPage>\r\n    <Spin size={\"large\"} />\r\n  </FullPage>\r\n);\r\n\r\n// 类型守卫\r\nconst isError = (value: any): value is Error => value?.message\r\n\r\nexport const ErrorBox = ({ error }: { error: unknown }) => {\r\n  if (isError(error)) {\r\n    return <Typography.Text type={\"danger\"}>{error?.message}</Typography.Text>\r\n  }\r\n  return null\r\n}\r\n\r\nexport const FullPageErrorFallback = ({ error }: { error: Error | null }) => (\r\n  <FullPage>\r\n    <DevTools />\r\n    <ErrorBox error={error} />\r\n    {/* <Typography.Text type={\"danger\"}>{error?.message}</Typography.Text> */}\r\n  </FullPage>\r\n);\r\n\r\nexport const ButtonNoPadding = styled(Button)`\r\n  padding: 0;\r\n`;\r\n\r\n\r\nexport const ScreenContainer = styled.div`\r\n  padding: 3.2rem;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  \r\n`","import React, { useState } from \"react\";\r\nimport * as auth from \"auth-provider\";\r\nimport { User } from \"screens/project-list/search-panel\";\r\nimport { ReactNode } from \"react\";\r\nimport { http } from \"utils/http\";\r\nimport { useMount } from \"utils\";\r\nimport { useAsync } from \"utils/use-async\";\r\nimport { FullPageErrorFallback, FullPageLoading } from \"components/lib\";\r\nimport { useQueryClient } from \"react-query\";\r\n\r\nconst AuthContext = React.createContext<\r\n  | {\r\n    user: User | null;\r\n    register: (form: AuthForm) => Promise<void>;\r\n    login: (form: AuthForm) => Promise<void>;\r\n    logout: () => Promise<void>;\r\n  }\r\n  | undefined\r\n>(undefined);\r\nAuthContext.displayName = \"AuthContext\";\r\n\r\ninterface AuthForm {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nconst bootstrapUser = async () => {\r\n  let user = null;\r\n  const token = auth.getToken();\r\n  if (token) {\r\n    const data = await http(\"me\", { token });\r\n    user = data.user;\r\n  }\r\n  return user;\r\n};\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const {\r\n    data: user,\r\n    error,\r\n    isLoading,\r\n    isIdle,\r\n    isError,\r\n    run,\r\n    setData: setUser,\r\n  } = useAsync<User | null>();\r\n\r\n  const queryClient = useQueryClient()\r\n  // const [user, setUser] = useState<User | null>(null);\r\n\r\n  const login = (form: AuthForm) => auth.login(form).then(setUser);\r\n\r\n  const register = (form: AuthForm) => auth.register(form).then(setUser);\r\n\r\n  const logout = () => auth.logout().then(() => {\r\n    setUser(null)\r\n    queryClient.clear()\r\n  });\r\n\r\n  useMount(() => {\r\n    run(bootstrapUser());\r\n    // bootstrapUser().then(setUser)\r\n  });\r\n\r\n  if (isIdle || isLoading) {\r\n    return <FullPageLoading></FullPageLoading>;\r\n  }\r\n\r\n  if (isError) {\r\n    return <FullPageErrorFallback error={error}></FullPageErrorFallback>;\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      children={children}\r\n      value={{ user, login, register, logout }}\r\n    ></AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = React.useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth必须在AuthProvider中使用\");\r\n  }\r\n  return context;\r\n};\r\n","import React from \"react\";\r\nimport { Rate } from \"antd\";\r\ninterface PinProps extends React.ComponentProps<typeof Rate> {\r\n  checked: boolean;\r\n  onCheckedChange?: (checked: boolean) => void;\r\n}\r\n\r\nexport const Pin = ({ checked, onCheckedChange, ...restProps }: PinProps) => {\r\n  return (\r\n    <Rate\r\n      count={1}\r\n      value={checked ? 1 : 0}\r\n      onChange={(num) => onCheckedChange?.(!!num)}\r\n      {...restProps}\r\n    ></Rate>\r\n  );\r\n};\r\n","import { QueryKey, useQueryClient } from \"react-query\";\r\n\r\nexport const useConfig = (\r\n  queryKey: QueryKey,\r\n  callback: (target: any, old?: any[]) => any[],\r\n) => {\r\n  const queryClient = useQueryClient();\r\n  return {\r\n    onSuccess: () => queryClient.invalidateQueries(queryKey),\r\n    async onMutate(target: any) {\r\n      const previousItems = queryClient.getQueryData(queryKey);\r\n      queryClient.setQueryData(queryKey, (old?: any[]) => {\r\n        return callback(target, old);\r\n      });\r\n      return { previousItems };\r\n    },\r\n    onError(error: any, newItem: any, context: any) {\r\n      queryClient.setQueryData(queryKey, context.previousItems);\r\n    },\r\n  };\r\n};\r\n\r\nexport const useDeleteConfig = (queryKey: QueryKey) =>\r\n  useConfig(\r\n    queryKey,\r\n    (target, old) => old?.filter((item) => item.id !== target.id) || [],\r\n  );\r\nexport const useEditConfig = (queryKey: QueryKey) =>\r\n  useConfig(\r\n    queryKey,\r\n    (target, old) =>\r\n      old?.map((item) =>\r\n        item.id === target.id ? { ...item, ...target } : item,\r\n      ) || [],\r\n  );\r\nexport const useAddConfig = (queryKey: QueryKey) =>\r\n  useConfig(queryKey, (target, old) => (old ? [...old, target] : []));\r\n\r\n\r\nexport const useReorderConfig = (queryKey: QueryKey) =>\r\n  useConfig(queryKey, (target, old) => old || []);","import { useAsync } from \"./use-async\";\r\nimport { Project } from \"screens/project-list/list\";\r\nimport { useEffect } from \"react\";\r\nimport { cleanObject } from \"utils\";\r\nimport { useHttp } from \"./http\";\r\nimport { QueryClient, QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useProjectsSearchParams } from \"screens/project-list/util\";\r\nimport {\r\n  useAddConfig,\r\n  useDeleteConfig,\r\n  useEditConfig,\r\n} from \"./use-optimistic-options\";\r\n\r\nexport const useProjects = (param?: Partial<Project>) => {\r\n  const client = useHttp();\r\n  return useQuery<Project[]>([\"projects\", param], () => client(\"projects\", { data: param}),\r\n    // [\"project\", param] 意思是projects为缓存的key字段，第二个参数param是用来观察param变化，一旦变化就重新自动调用，重新调用第二个参数的() => {}该方法, 但是projects字符串是个名字，相当于\r\n    //缓存的key名，所以发生变化的主要是param，每当请求参数变化时，就发生第二个参数的函数调用\r\n  );\r\n \r\n  // const { run, ...result } = useAsync<Project[]>();\r\n  // const fetchProjects = () =>\r\n  //   client(\"projects\", { data: cleanObject(param || {}) });\r\n\r\n  // useEffect(() => {\r\n  //   run(fetchProjects(), { retry: fetchProjects });\r\n  // }, [param]);\r\n\r\n  // return result;\r\n};\r\n\r\nexport const useProject = (id?: number) => {\r\n  const client = useHttp()\r\n  return useQuery<Project>(\r\n    ['project', {id}],\r\n    () => client(`projects/${id}`, {}),\r\n    {  // 只有id存在值时，才出发请求\r\n      enabled: Boolean(id)\r\n    }\r\n\r\n  )\r\n}\r\n\r\n\r\nexport const useEditProject = (queryKey: QueryKey) => {\r\n\r\n  const client = useHttp();\r\n  // 乐观更新最初版本（需要删掉useEditProject里的参数queryKey才算）\r\n  // const queryKey = ['projects', searchParams]  // 拿到缓存的对应的key\r\n  // return useMutation(\r\n  //   (params: Partial<Project>) =>\r\n  //     client(`projects/${params.id}`, {\r\n  //       data: params,\r\n  //       method: \"PATCH\",\r\n  //     }),\r\n  //     {\r\n  //       onSuccess: () => queryClient.invalidateQueries(queryKey),\r\n  //       //乐观更新\r\n  //       async onMutate(target) {  // 这个函数，一旦useMutation发生，这个onMutate就触发\r\n  //         const previousItems = queryClient.getQueryData(queryKey) // 取得key对应的value值\r\n  //         queryClient.setQueryData(queryKey, (old?: Project[]) => {\r\n  //           return old?.map(project => project.id === target.id ? {...project, ...target}: project) || []\r\n  //         })\r\n  //         return {previousItems}  // 这里是作为onError发生后才赋值的\r\n  //       },\r\n  //       onError(error, newItem, context:any) {  // 这里是作为乐观更新的回滚机制而使用，意思是，当useMutation请求不成功的时候，我们不能直接乐观更新\r\n  //           queryClient.setQueryData(queryKey, context.previousItems)\r\n  //       }\r\n  //     }\r\n  // );\r\n\r\n  // 把乐观更新封装了后的版本:\r\n\r\n  return useMutation(\r\n    (params: Partial<Project>) =>\r\n      client(`projects/${params.id}`, {\r\n        data: params,\r\n        method: \"PATCH\",\r\n      }),\r\n    useEditConfig(queryKey),\r\n  );\r\n\r\n  // const mutate = (params: Partial<Project>) => {\r\n  //   return run(\r\n  //     client(`projects/${params.id}`, {\r\n  //       data: params,\r\n  //       method: \"PATCH\",\r\n  //     }),\r\n  //   );\r\n  // };\r\n  // return {\r\n  //   mutate,\r\n  //   ...asyncResult,\r\n  // };\r\n};\r\n\r\nexport const useDeleteProject = (queryKey: QueryKey) => {\r\n  // const { run, ...asyncResult } = useAsync();\r\n  const client = useHttp();\r\n  // const queryClient = useQueryClient();\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`projects/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDeleteConfig(queryKey),\r\n  );\r\n};\r\n\r\nexport const useAddProject = (queryKey: QueryKey) => {\r\n  // const { run, ...asyncResult } = useAsync();\r\n  const client = useHttp();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation(\r\n    (params: Partial<Project>) =>\r\n      client(`projects`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }), {\r\n        onSuccess:() => queryClient.invalidateQueries('projects')\r\n      }\r\n    // useAddConfig(queryKey),\r\n  );\r\n  // const mutate = (params: Partial<Project>) => {\r\n  //   return run(\r\n  //     client(`projects/${params.id}`, {\r\n  //       data: params,\r\n  //       method: \"POST\",\r\n  //     }),\r\n  //   );\r\n  // };\r\n  // return {\r\n  //   mutate,\r\n  //   ...asyncResult,\r\n  // };\r\n};","import { useSearchParams, URLSearchParamsInit } from \"react-router-dom\";\r\nimport { useMemo } from \"react\";\r\nimport { cleanObject } from \"utils\";\r\n/**\r\n * 返回页面url中，指定键的参数值\r\n */\r\n\r\nexport const useUrlQueryParam = <K extends string>(keys: K[]) => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  return [\r\n    useMemo(\r\n      () =>\r\n        keys.reduce(\r\n          (prev, key) => {\r\n            return { ...prev, [key]: searchParams.get(key) || \"\" };\r\n          },\r\n          {} as { [key in K]: string },\r\n        ),\r\n      [searchParams],\r\n    ),\r\n    (params: Partial<{ [key in K]: unknown }>) => {\r\n      const o = cleanObject({\r\n        ...Object.fromEntries(searchParams),\r\n        ...params,\r\n      }) as URLSearchParamsInit;\r\n      return setSearchParams(o);\r\n    },\r\n    setSearchParams,\r\n  ] as const;\r\n};\r\n\r\n\r\nexport const useSetUrlSearchParam = () => {\r\n  const [searchParams, setSearchParam] = useSearchParams()\r\n  return (params: { [key in string]: unknown }) => {\r\n    const o = cleanObject({\r\n      ...Object.fromEntries(searchParams),\r\n      ...params\r\n    }) as URLSearchParamsInit;\r\n\r\n    return setSearchParam(o)\r\n  }\r\n}","import { useSetUrlSearchParam, useUrlQueryParam } from \"utils/url\";\r\nimport { useMemo } from \"react\";\r\nimport { ProjectModal } from \"./project-modal\";\r\nimport { useHttp } from \"utils/http\";\r\nimport { useQuery } from \"react-query\";\r\nimport { Project } from \"./list\";\r\n\r\n// 项目列表搜索的参数\r\nexport const useProjectsSearchParams = () => {\r\n  const [param, setParam] = useUrlQueryParam([\"name\", \"personId\"]);\r\n  return [\r\n    useMemo(\r\n      () => ({ ...param, personId: Number(param.personId) || undefined }),\r\n      [param],\r\n    ),\r\n    setParam,\r\n  ] as const;\r\n};\r\n\r\nexport const useProjectsQueryKey = () => {\r\n  const [params] = useProjectsSearchParams();\r\n  return [\"projects\", params];\r\n};\r\n\r\n// export const useUserModal = () => {\r\n//   const open = () => setProjectCreate({ projectCreate: true });\r\n//   return {\r\n//     open\r\n//   }\r\n// }\r\n\r\nexport const useProjectModal = () => {\r\n  const [{ projectCreate }, setProjectCreate] = useUrlQueryParam([\r\n    \"projectCreate\",\r\n  ]);\r\n  const [{ editingProjectId }, setEditingProjectId] = useUrlQueryParam([\r\n    \"editingProjectId\",\r\n  ]);\r\n  const setUrlParams = useSetUrlSearchParam();\r\n  const startEdit = (id: number) => setEditingProjectId({ editingProjectId: id });\r\n  const { data: editingProject, isLoading } = useProject(Number(editingProjectId));\r\n  const open = () => setProjectCreate({ projectCreate: true });\r\n\r\n  const close = () => {\r\n    setUrlParams({ projectCreate: \"\", editingProjectId: \"\" });\r\n      // setProjectCreate({ projectCreate: undefined });\r\n  }\r\n  // const close = () => {\r\n  //   setProjectCreate({ projectCreate: undefined });\r\n  //   setEditingProjectId({ editingProjectId: undefined });\r\n  //   console.log('undeif',projectCreate, projectCreate === \"true\" )\r\n  // };\r\n\r\n\r\n\r\n  return {\r\n    projectModalOpen: projectCreate === \"true\" || Boolean(editingProjectId),\r\n    open,\r\n    close,\r\n    startEdit,\r\n    editingProject,\r\n    isLoading,\r\n  };\r\n\r\n  // return [\r\n  //   projectCreate === 'true',\r\n  //   open,\r\n  //   close\r\n  // ] as const\r\n};\r\n\r\nexport const useProject = (id?: number) => {\r\n  const client = useHttp();\r\n  return useQuery<Project>(\r\n    [\"project\", { id }],\r\n    () => client(`projects/${id}`, {}),\r\n    { // 配置参数， 这里指，id有值时才触发上面的函数\r\n      enabled: Boolean(id),\r\n    },\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { User } from \"screens/project-list/search-panel\";\r\nimport { Table, TableProps, Dropdown, Menu, Modal } from \"antd\";\r\nimport { HashRouter, Link } from \"react-router-dom\";\r\nimport dayjs from \"dayjs\";\r\nimport { Pin } from \"components/pin\";\r\nimport { useDeleteProject, useEditProject } from \"utils/project\";\r\nimport { ButtonNoPadding } from \"components/lib\";\r\nimport { useProjectModal, useProjectsQueryKey, useProjectsSearchParams } from \"./util\";\r\nexport interface Project {\r\n  id: number;\r\n  name: string;\r\n  personId: number;\r\n  pin: boolean;\r\n  organization: string;\r\n  created: number;\r\n\r\n}\r\n\r\ninterface ListProps extends TableProps<Project> {\r\n  users: User[];\r\n}\r\nexport const List = ({ users, ...props }: ListProps) => {\r\n  const { mutate } = useEditProject(useProjectsQueryKey());\r\n  const { startEdit } = useProjectModal();\r\n  const pinProject = (id: number) => (pin: boolean) => mutate({ id, pin });\r\n  const editProject = (id: number) => () => startEdit(id);\r\n\r\n  // .then(props.refresh);\r\n  return (\r\n    <Table\r\n      rowKey={\"id\"}\r\n      pagination={false}\r\n      columns={[\r\n        {\r\n          title: <Pin checked={true} disabled={true} />,\r\n          render(value, project) {\r\n            return (\r\n              <Pin\r\n                checked={project.pin}\r\n                onCheckedChange={pinProject(project.id)}\r\n              ></Pin>\r\n            );\r\n          },\r\n        },\r\n        // 'projects/' + project.id\r\n        {\r\n          title: \"name\",\r\n          sorter: (a, b) => a.name.localeCompare(b.name),\r\n          render(value, project) {\r\n            return <Link to={String(project.id)}>{project.name}</Link>;\r\n          },\r\n        },\r\n        {\r\n          title: \"organization\",\r\n          dataIndex: \"organization\",\r\n        },\r\n        {\r\n          title: \"administrator\",\r\n          render(value, project) {\r\n            return (\r\n              <span>\r\n                {users.find((user) => user.id === project.personId)?.name ||\r\n                  \"未知\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"createTime\",\r\n          render(value, project) {\r\n            return (\r\n              <span>\r\n                {project.created\r\n                  ? dayjs(project.created).format(\"YYYY-MM-DD\")\r\n                  : \"无\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          render(value, project) {\r\n            return <More project={project}></More>;\r\n          },\r\n        },\r\n      ]}\r\n      {...props}\r\n    ></Table>\r\n  );\r\n};\r\n\r\nconst More = ({ project }: { project: Project }) => {\r\n  const { startEdit } = useProjectModal();\r\n\r\n  const editProject = (id: number) => () => startEdit(id);\r\n  const { mutate: deleteProject } = useDeleteProject(useProjectsQueryKey());\r\n  const confirmDeleteProject = (id: number) => {\r\n    Modal.confirm({\r\n      title: \"are you sure to delete this project?\",\r\n      content: \"click the Yes to delete\",\r\n      okText: \"Yes\",\r\n      onOk() {\r\n        deleteProject({ id });\r\n        // window.location.reload();\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Dropdown\r\n      overlay={\r\n        <Menu>\r\n          <Menu.Item key={\"edit\"}>\r\n            <ButtonNoPadding type={\"link\"} onClick={editProject(project.id)}>\r\n              edit\r\n            </ButtonNoPadding>\r\n          </Menu.Item>\r\n          <Menu.Item key={\"delete\"}>\r\n            <ButtonNoPadding\r\n              type={\"link\"}\r\n              onClick={() => confirmDeleteProject(project.id)}\r\n            >\r\n              delete\r\n            </ButtonNoPadding>\r\n          </Menu.Item>\r\n        </Menu>\r\n      }\r\n    >\r\n      <ButtonNoPadding type={\"link\"}>...</ButtonNoPadding>\r\n    </Dropdown>\r\n  );\r\n};\r\n","import { User } from \"screens/project-list/search-panel\";\r\nimport { useAsync } from \"./use-async\";\r\nimport { Project } from \"screens/project-list/list\";\r\nimport { useEffect } from \"react\";\r\nimport { cleanObject } from \"utils\";\r\nimport { useHttp } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { useAddConfig, useDeleteConfig } from \"./use-optimistic-options\";\r\n\r\n\r\nexport const useUsers = (param?: Partial<User>) => {\r\n  const client = useHttp();\r\n\r\n  return useQuery<User[]>([\"users\", param], () =>\r\n    // [\"project\", param] 意思是当projects字符串变化或者param变化时，重新调用第二个参数的() => {}该方法, 但是projects字符串是个名字，相当于\r\n    //缓存的key名，所以发生变化的主要是param，每当请求参数变化时，就发生第二个参数的函数调用\r\n    client(\"users\", { data: cleanObject(param || {}) }),\r\n  );\r\n\r\n  \r\n  // const { run, ...result } = useAsync<Project[]>();\r\n  // const fetchProjects = () =>\r\n  //   client(\"projects\", { data: cleanObject(param || {}) });\r\n\r\n  // useEffect(() => {\r\n  //   run(fetchProjects(), { retry: fetchProjects });\r\n  // }, [param]);\r\n\r\n  // return result;\r\n};\r\n\r\nexport const useAddUsers = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n      (params: Partial<User>) =>\r\n          client(`users`, {\r\n              data: params,\r\n              method: \"POST\",\r\n          }),\r\n      useAddConfig(queryKey));\r\n}\r\n\r\n\r\n\r\nexport const useDeleteUsers = (queryKey: QueryKey) => {\r\n  const client = useHttp();\r\n\r\n  return useMutation(\r\n      ({ id }: { id: number }) =>\r\n          client(`users/${id}`, {\r\n              method: \"DELETE\",\r\n          }),\r\n      useDeleteConfig(queryKey));\r\n}\r\n\r\n\r\n// export const useUsers = (param?: Partial<User>) => {\r\n//   const client = useHttp();\r\n//   const { run, ...result } = useAsync<User[]>();\r\n\r\n//   useEffect(() => {\r\n//     run(client(\"users\", { data: cleanObject(param || {}) }));\r\n//   }, [param]);\r\n\r\n//   return result;\r\n// };\r\n","import { Select } from \"antd\";\r\nimport React from \"react\";\r\nimport { Raw } from \"../types\";\r\n\r\ntype SelectProps = React.ComponentProps<typeof Select>;\r\n\r\ninterface IdSelectProps\r\n  extends Omit<SelectProps, \"value\" | \"onChange\" | \"options\"> {\r\n  value?: Raw | null | undefined;\r\n  onChange?: (value?: number) => void;\r\n  defaultOptionName?: string;\r\n  options?: { name: string; id: number }[];\r\n}\r\n\r\n/*\r\nvalue 可以传入多种类型的值\r\nonChange 只会回调number | undefined 类型\r\n当 isNaN(Number(value)) 为true 的时候, 代表选择默认类型\r\n当选择默认类型的时候，onChange 会回调undefined\r\n*/\r\nexport const IdSelect = (props: IdSelectProps) => {\r\n  const { value, onChange, defaultOptionName, options, ...restProps } = props;\r\n\r\n  return (\r\n    <Select\r\n      value={options?.length ? toNumber(value) : 0}\r\n      onChange={(value) => onChange?.(toNumber(value) || undefined)}\r\n      {...restProps}\r\n    >\r\n      {defaultOptionName ? (\r\n        <Select.Option value={0}> {defaultOptionName}</Select.Option>\r\n      ) : null}\r\n      {options?.map((option) => (\r\n        <Select.Option key={option.id} value={option.id}>\r\n          {option.name}\r\n        </Select.Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n};\r\n\r\nconst toNumber = (value: unknown) => (isNaN(Number(value)) ? 0 : Number(value));\r\n","import React from \"react\";\r\nimport { useUsers } from \"utils/user\";\r\nimport { IdSelect } from \"./id-select\";\r\n\r\nexport const UserSelect = (props: React.ComponentProps<typeof IdSelect>) => {\r\n  const { data: users } = useUsers();\r\n  return <IdSelect options={users || []} {...props}></IdSelect>;\r\n};\r\n","import { jsx } from \"@emotion/react\";\r\nimport React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Form, Input, Button, Select } from \"antd\";\r\nimport { Project } from \"./list\";\r\nimport { UserSelect } from \"components/user-select\";\r\n\r\nexport interface User {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  title: string;\r\n  organization: string;\r\n  token: string;\r\n}\r\n\r\nexport interface SearchPanelProps {\r\n  users: User[];\r\n  param: Partial<Pick<Project, \"name\" | \"personId\">>;\r\n  setParam: (param: SearchPanelProps[\"param\"]) => void;\r\n}\r\n\r\nexport const SearchPanel = ({ param, setParam, users }: SearchPanelProps) => {\r\n  return (\r\n    <Form style={{ marginBottom: \"2rem\" }} layout={\"inline\"}>\r\n      <Form.Item>\r\n        <Input\r\n          placeholder={\"project's name\"}\r\n          type=\"text\"\r\n          value={param.name}\r\n          onChange={(evt) => setParam({ ...param, name: evt.target.value })}\r\n        />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <UserSelect\r\n          defaultOptionName={\"administrator\"}\r\n          value={param.personId}\r\n          onChange={(value) => setParam({ ...param, personId: value })}\r\n        ></UserSelect>\r\n        {/* <Select value={param.personId} onChange={value => setParam({ ...param, personId: value })}>\r\n                <Select.Option value={''}>负责人</Select.Option>\r\n                {\r\n                    users.map((user) => <Select.Option key={user.id} value={String(user.id)}>{user.name}</Select.Option>)\r\n                }\r\n            </Select> */}\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { List, Project } from \"./list\";\r\nimport { SearchPanel } from \"./search-panel\";\r\nimport { useState, useEffect } from \"react\";\r\nimport * as qs from \"qs\";\r\nimport { cleanObject, useMount, useDebounce } from \"utils\";\r\nimport { useHttp } from \"utils/http\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useAsync } from \"utils/use-async\";\r\nimport { useProjects } from \"utils/project\";\r\nimport { useUsers } from \"utils/user\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { useUrlQueryParam } from \"utils/url\";\r\nimport { useProjectModal, useProjectsSearchParams } from \"./util\";\r\nimport { Button } from \"antd\";\r\nimport { ButtonNoPadding, ErrorBox, Row } from \"../../components/lib\";\r\nimport { TsReactTest } from \"screens/test1\";\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nexport const ProjectListScreen = () => {\r\n  // const [param, setParam] = useState({\r\n  //     name: '',\r\n  //     personId: 0\r\n  // })\r\n  const { open } = useProjectModal();\r\n  const [param, setParam] = useProjectsSearchParams();\r\n  // const debouncedParam = useDebounce(param, 2000);\r\n  const { isLoading, error, data: list } = useProjects(useDebounce(param, 2000));\r\n  const { data: users } = useUsers();\r\n  const client = useHttp();\r\n  return (\r\n    <Container>\r\n      {/* <Helmet>\r\n        <title>请登录或注册以继续</title>\r\n      </Helmet> */}\r\n      <Row between={true}>\r\n        <h1>Project List</h1>\r\n        <ButtonNoPadding onClick={open} style={{ padding: 0 }} type={\"link\"}>\r\n          create project\r\n        </ButtonNoPadding>\r\n      </Row>\r\n\r\n      {/* <Button onClick={retry}>retry</Button> */}\r\n      <SearchPanel\r\n        users={users || []}\r\n        param={param}\r\n        setParam={setParam}\r\n      ></SearchPanel>\r\n      <ErrorBox error={error} />\r\n      <List\r\n        loading={isLoading}\r\n        dataSource={list || []}\r\n        users={users || []}\r\n      ></List>\r\n      {/* <TsReactTest /> */}\r\n    </Container>\r\n  );\r\n};\r\n\r\nProjectListScreen.whyDidYouRender = true;\r\n\r\nconst Container = styled.div`\r\n  padding: 3.2rem;\r\n  height: 100%;\r\n  width: 100%;\r\n`;\r\n","import { useAsync } from \"./use-async\";\r\nimport { Project } from \"screens/project-list/list\";\r\nimport { useEffect } from \"react\";\r\nimport { cleanObject } from \"utils\";\r\nimport { useHttp } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useProjectsSearchParams } from \"screens/project-list/util\";\r\nimport {\r\n    useAddConfig,\r\n    useDeleteConfig,\r\n    useEditConfig,\r\n    useReorderConfig,\r\n} from \"./use-optimistic-options\";\r\nimport { Kanban } from \"types/kanban\";\r\nimport { Task } from \"types/task\";\r\n\r\nexport const useKanbans = (param?: Partial<Kanban>) => {\r\n    const client = useHttp();\r\n\r\n    return useQuery<Kanban[], Error>([\"kanbans\", param], () =>\r\n        // [\"project\", param] 意思是当projects字符串变化或者param变化时，重新调用第二个参数的() => {}该方法, 但是projects字符串是个名字，相当于\r\n        //缓存的key名，所以发生变化的主要是param，每当请求参数变化时，就发生第二个参数的函数调用\r\n        client(\"kanbans\", { data: cleanObject(param || {}) }),\r\n    );\r\n};\r\n\r\nexport const useAddKanban = (queryKey: QueryKey) => {\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation(\r\n        (params: Partial<Kanban>) =>\r\n            client(`kanbans`, {\r\n                data: params,\r\n                method: \"POST\",\r\n            }),\r\n        useAddConfig(queryKey));\r\n}\r\n\r\n\r\nexport const useAddTask = (queryKey: QueryKey) => {\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation(\r\n        (params: Partial<Task>) =>\r\n            client(`tasks`, {\r\n                data: params,\r\n                method: \"POST\",\r\n            }),\r\n        useAddConfig(queryKey));\r\n}\r\n\r\nexport const useDeleteKanban = (queryKey: QueryKey) => {\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation(\r\n        ({ id }: { id: number }) =>\r\n            client(`kanbans/${id}`, {\r\n                method: \"DELETE\",\r\n            }),\r\n        useDeleteConfig(queryKey));\r\n}\r\nexport interface SortProps {\r\n\r\n    type: 'before' | 'after',  // 放在目标item的前还是后\r\n    referenceId: number;  // 目标item\r\n    fromId: number  // 要重新排序的item\r\n}\r\nexport const useReorderKanban = (queryKey: QueryKey) => {\r\n    const client = useHttp()\r\n    return useMutation((params: SortProps) => {\r\n        return client('kanbans/reorder', {\r\n            data: params,\r\n            method: 'POST'\r\n        })\r\n    }, useReorderConfig(queryKey))\r\n}","import { useAsync } from \"./use-async\";\r\nimport { Project } from \"screens/project-list/list\";\r\nimport { useEffect } from \"react\";\r\nimport { cleanObject } from \"utils\";\r\nimport { useHttp } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useProjectsSearchParams } from \"screens/project-list/util\";\r\nimport {\r\n    useAddConfig,\r\n    useDeleteConfig,\r\n    useEditConfig,\r\n    useReorderConfig,\r\n} from \"./use-optimistic-options\";\r\nimport { Kanban } from \"types/kanban\";\r\nimport { Task } from \"types/task\";\r\n\r\nexport const useTasks = (param?: Partial<Task>) => {\r\n    const client = useHttp();\r\n\r\n    return useQuery<Task[], Error>([\"tasks\", param], () =>\r\n        // [\"project\", param] 意思是当projects字符串变化或者param变化时，重新调用第二个参数的() => {}该方法, 但是projects字符串是个名字，相当于\r\n        //缓存的key名，所以发生变化的主要是param，每当请求参数变化时，就发生第二个参数的函数调用\r\n        client(\"tasks\", { data: cleanObject(param || {}) }),\r\n    );\r\n\r\n\r\n};\r\n\r\n\r\n\r\nexport const useAddTask = (queryKey: QueryKey) => {\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation(\r\n        (params: Partial<Task>) =>\r\n            client(`tasks`, {\r\n                data: params,\r\n                method: \"POST\",\r\n            }),\r\n        useAddConfig(queryKey));\r\n}\r\n\r\n\r\nexport const useTask = (id?: number) => {\r\n    // const { run, ...asyncResult } = useAsync();\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useQuery<Project>(\r\n        [\"task\", { id }],\r\n        () => client(`tasks/${id}`, {}),\r\n        {\r\n            enabled: Boolean(id)\r\n        }\r\n    );\r\n    // const mutate = (params: Partial<Project>) => {\r\n    //   return run(\r\n    //     client(`projects/${params.id}`, {\r\n    //       data: params,\r\n    //       method: \"POST\",\r\n    //     }),\r\n    //   );\r\n    // };\r\n    // return {\r\n    //   mutate,\r\n    //   ...asyncResult,\r\n    // };\r\n};\r\n\r\n\r\nexport const useEditTask = (queryKey: QueryKey) => {\r\n\r\n    const client = useHttp();\r\n    return useMutation(\r\n        (params: Partial<Task>) =>\r\n            client(`tasks/${params.id}`, {\r\n                data: params,\r\n                method: \"PATCH\",\r\n            }),\r\n        useEditConfig(queryKey)\r\n        // useEditConfig(queryKey),\r\n    );\r\n}\r\n\r\n\r\nexport const useDeleteTask = (queryKey: QueryKey) => {\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation(\r\n        ({ id }: { id: number }) =>\r\n            client(`tasks/${id}`, {\r\n                method: \"DELETE\",\r\n            }),\r\n        useDeleteConfig(queryKey));\r\n}\r\nexport interface SortProps {\r\n\r\n    type: 'before' | 'after',  // 放在目标item的前还是后\r\n    referenceId: number;  // 目标item\r\n    fromId: number  // 要重新排序的item\r\n    fromKanbanId?: number,\r\n    toKanbanId?: number\r\n}\r\nexport const useReorderTask = (queryKey: QueryKey) => {\r\n    const client = useHttp()\r\n    return useMutation((params: SortProps) => {\r\n        return client('tasks/reorder', {\r\n            data: params,\r\n            method: 'POST'\r\n        })\r\n    },\r\n        useReorderConfig(queryKey))\r\n}","import { useMemo, useCallback } from 'react';\r\nimport { useLocation } from \"react-router\"\r\nimport { useDebounce } from 'utils';\r\nimport { useProject, useProjects } from \"utils/project\"\r\nimport { useTask } from \"utils/task\"\r\nimport { useUrlQueryParam } from \"utils/url\"\r\n\r\nexport const useProjectIdInUrl = () => {\r\n    const { pathname } = useLocation()\r\n    const id = pathname.match(/projects\\/(\\d+)/)?.[1]\r\n    return {\r\n        id: Number(id)\r\n    }\r\n}\r\n\r\nexport const useProjectInUrl = () => useProject(useProjectIdInUrl().id)\r\n\r\nexport const useKanbanSearchParams = () => ({ projectId: useProjectIdInUrl().id })\r\n\r\nexport const useKanbansQueryKey = () => ['kanbans', useKanbanSearchParams()]\r\n\r\nexport const useTasksSearchParams = () => {\r\n    const [param, setParam] = useUrlQueryParam(['name', 'typeId', 'processorId', 'tagId'])\r\n\r\n    const projectId = useProjectIdInUrl().id\r\n\r\n    const debouncedName = useDebounce(param.name, 200)\r\n\r\n    return useMemo(() => ({\r\n        projectId,\r\n        typeId: Number(param.typeId) || undefined,\r\n        processorId: Number(param.processorId) || undefined,\r\n        tagId: Number(param.tagId) || undefined,\r\n        name: debouncedName\r\n    }), [projectId, param]);\r\n}\r\n\r\nexport const useTasksQueryKey = () => ['tasks', useTasksSearchParams()];\r\n\r\nexport const useTasksModal = () => {\r\n    const [{ editingTaskId }, setEditingTaskId] = useUrlQueryParam(['editingTaskId'])\r\n\r\n    const { data: editingTask, isLoading } = useTask(Number(editingTaskId))\r\n\r\n    const startEdit = useCallback((id: number) => {\r\n        setEditingTaskId({ editingTaskId: id })\r\n    }, [setEditingTaskId])\r\n\r\n    const close = useCallback(() => {\r\n        setEditingTaskId({ editingTaskId: '' })\r\n    }, [setEditingTaskId])\r\n\r\n    return {\r\n        editingTaskId,\r\n        editingTask,\r\n        startEdit,\r\n        close,\r\n        isLoading\r\n    }\r\n}\r\n","import { useAsync } from \"./use-async\";\r\nimport { Project } from \"screens/project-list/list\";\r\nimport { useEffect } from \"react\";\r\nimport { cleanObject } from \"utils\";\r\nimport { useHttp } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useProjectsSearchParams } from \"screens/project-list/util\";\r\nimport {\r\n    useAddConfig,\r\n    useDeleteConfig,\r\n    useEditConfig,\r\n} from \"./use-optimistic-options\";\r\nimport { Kanban } from \"types/kanban\";\r\nimport { Task } from \"types/task\";\r\n\r\nexport const useTaskTypes = () => {\r\n    const client = useHttp();\r\n\r\n    return useQuery<Task[], Error>([\"taskTypes\"], () => client(\"taskTypes\", {}),\r\n    );\r\n\r\n\r\n};","import React from \"react\";\r\nimport { useUsers } from \"utils/user\";\r\nimport { IdSelect } from \"./id-select\";\r\nimport { useTaskTypes } from \"utils/task-type\";\r\n\r\nexport const TaskTypeSelect = (props: React.ComponentProps<typeof IdSelect>) => {\r\n    const { data: taskTypes } = useTaskTypes();\r\n    return <IdSelect options={taskTypes || []} {...props}></IdSelect>;\r\n};\r\n","import React from \"react\";\r\nimport { useTasksSearchParams } from \"./util\";\r\nimport { useSetUrlSearchParam } from \"utils/url\";\r\nimport { Row } from \"components/lib\";\r\nimport { Button, Input } from \"antd\";\r\nimport { UserSelect } from \"components/user-select\";\r\nimport { TaskTypeSelect } from \"components/task-type-select\";\r\n\r\n\r\nexport const SearchPanel = () => {\r\n    const searchParams = useTasksSearchParams()\r\n    const setSearchParams = useSetUrlSearchParam()\r\n    const reset = () => {\r\n        setSearchParams({\r\n            typeId: undefined,\r\n            processorId: undefined,\r\n            tagId: undefined,\r\n            name: undefined\r\n        })\r\n    }\r\n\r\n    return <Row marginBottom={4} gap={true}>\r\n        <Input style={{ width: '20rem' }}  placeholder={'task_name'} onChange={evt => setSearchParams({ name: evt.target.value })} />\r\n        {/* <Input style={{ width: '20rem' }} placeholder={'task_name'} value={searchParams.name}\r\n            onChange={evt => setSearchParams({ name: evt.target.value })} /> */}\r\n        <UserSelect defaultOptionName={'administrator'} value={searchParams.processorId} onChange={value => setSearchParams({ processorId: value })}></UserSelect>\r\n        <TaskTypeSelect defaultOptionName={'kind'} value={searchParams.typeId} onChange={value => setSearchParams({ typeId: value })}></TaskTypeSelect>\r\n        <Button onClick={reset}>clear filters</Button>\r\n    </Row>\r\n}","export default \"data:image/png;base64,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\"","import React, { useState } from 'react'\r\nimport { useAddTask } from 'utils/task'\r\nimport { useProjectIdInUrl, useTasksQueryKey } from './util'\r\nimport { useEffect } from 'react';\r\nimport { Card, Input } from 'antd';\r\n\r\nexport const CreateTask = ({ kanbanId }: { kanbanId: number }) => {\r\n    \r\n    const { mutateAsync: addTask } = useAddTask(useTasksQueryKey())\r\n    const projectId = useProjectIdInUrl().id;\r\n    const [name, setName] = useState('')\r\n    const [inputMode, setInputMode] = useState(false);\r\n\r\n    const submit = async () => {\r\n        await addTask({ projectId, name, kanbanId })\r\n        setInputMode(false)\r\n        setName('')\r\n    }\r\n    const toggle = () => setInputMode(mode => !mode)\r\n\r\n    useEffect(() => {\r\n        if (!inputMode) {\r\n            setName('')\r\n        }\r\n    }, [inputMode])\r\n\r\n    if (!inputMode) {\r\n        return <div onClick={toggle}>+ceate a task</div>\r\n    }\r\n\r\n    return <Card>\r\n        <Input onBlur={toggle} placeholder={'需要做些什么'} autoFocus={true} onPressEnter={submit}\r\n            value={name} onChange={evt => setName(evt.target.value)}\r\n        />\r\n    </Card>\r\n}\r\n","import React from 'react'\r\n\r\nexport const Mark = ({ name, keyword }: { name: string, keyword: string }) => {\r\n    if (!keyword) {\r\n        return <>{name}</>\r\n    }\r\n\r\n    const arr = name.split(keyword)\r\n\r\n    return <>\r\n        {\r\n            arr.map((str, index) => {\r\n                return <span key={index}>\r\n                    {str}\r\n                    {index === arr.length - 1 ? null : <span style={{ color: '#257AFD' }}>{keyword}</span>}\r\n                </span>\r\n            })\r\n        }\r\n    </>\r\n}","import React from \"react\";\r\nimport { Kanban } from \"types/kanban\";\r\nimport { useTasks } from \"utils/task\";\r\nimport { useKanbansQueryKey, useTasksModal, useTasksSearchParams } from './util';\r\nimport { useTaskTypes } from \"utils/task-type\"\r\nimport taskIcon from \"assets/task.png\";\r\nimport bugIcon from \"assets/bug.png\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Button, Card, Dropdown, Menu, Modal } from \"antd\";\r\nimport { CreateTask } from \"./create-task\";\r\nimport { Task } from \"types/task\";\r\nimport { Mark } from \"components/mark\";\r\nimport { useDeleteKanban } from \"utils/kanban\";\r\nimport { Row } from \"components/lib\";\r\nimport { Drag, Drop, DropChild } from \"components/drag-and-drop\";\r\nconst TaskTypeIcon = ({ id }: { id: number }) => {\r\n    const { data: taskTypes } = useTaskTypes()\r\n    const name = taskTypes?.find((taskType) => taskType.id === id)?.name;\r\n    if (!name) {\r\n        return null;\r\n    }\r\n    return <img style={{width: 20, height: 20}}src={name === \"task\" ? taskIcon : bugIcon} />\r\n}\r\n\r\nconst TaskCard = ({ task }: { task: Task }) => {\r\n    const { startEdit } = useTasksModal()\r\n    const { name: keyword } = useTasksSearchParams()\r\n    return <Card onClick={() => startEdit(task.id)} style={{ marginBottom: '0.5rem', cursor: 'pointer' }} key={task.id}>\r\n\r\n        <p>\r\n            <Mark keyword={keyword} name={task.name} />\r\n        </p>\r\n\r\n        <TaskTypeIcon id={task.typeId}></TaskTypeIcon>\r\n    </Card>\r\n}\r\n// export const KanbanColumn = ({kanban}: {kanban: Kanban}) => {\r\n//     const {data: allTasks} = useTasks(useTasksSearchParams())\r\n//     const tasks = allTasks?.filter(task => task.kanbanId === kanban.id)\r\n//     return <Container>\r\n//         <h3>{kanban.name}</h3>\r\n//         {tasks?.map(task => <div key={task.id}>\r\n//             {task.name}\r\n//             <TaskTypeIcon id={task.typeId} />\r\n//         </div>)}\r\n//     </Container>\r\n// }\r\nexport const KanbanColumn = ({ kanban }: { kanban: Kanban }) => {\r\n    const { data: allTasks } = useTasks(useTasksSearchParams())\r\n    const tasks = allTasks?.filter(task => task.kanbanId === kanban.id)\r\n\r\n    return <Container>\r\n        <Row between={true}>\r\n            <h3>{kanban.name}</h3>\r\n            <More kanban={kanban} key={kanban.id}></More>\r\n        </Row>\r\n        <TasksContainer>\r\n            {tasks?.map((task, taskIndex) => (\r\n\r\n                <div>\r\n                    <TaskCard task={task} key={task.id}></TaskCard>\r\n                </div>\r\n            ))\r\n\r\n            }\r\n            <CreateTask kanbanId={kanban.id}></CreateTask>\r\n        </TasksContainer>\r\n\r\n    </Container>\r\n};\r\n\r\n// export const KanbanColumn = React.forwardRef<HTMLDivElement, { kanban: Kanban }>(({ kanban, ...props }, ref) => {\r\n//     const { data: allTasks } = useTasks(useTasksSearchParams())\r\n//     const tasks = allTasks?.filter(task => task.kanbanId === kanban.id)\r\n\r\n//     return <Container {...props} ref={ref}>\r\n//         <Row between={true}>\r\n//             <h3>{kanban.name}</h3>\r\n//             <More kanban={kanban} key={kanban.id}></More>\r\n//         </Row>\r\n//         <h3>{kanban.name}</h3>\r\n//         <TasksContainer>\r\n//             <Drop type={'ROW'} direction={'vertical'} droppableId={'' + kanban.id}>\r\n//                 <DropChild style={{ minHeight: '5px' }}>\r\n//                     {tasks?.map((task, taskIndex) => (\r\n//                         <Drag key={task.id} draggableId={'task' + task.id} index={taskIndex}>\r\n//                             <div ref={ref}>\r\n//                                 <TaskCard task={task} key={task.id}></TaskCard>\r\n//                             </div>\r\n//                         </Drag>\r\n//                     ))\r\n\r\n//                     }\r\n\r\n//                 </DropChild>\r\n//             </Drop>\r\n//             <CreateTask kanbanId={kanban.id}></CreateTask>\r\n//         </TasksContainer>\r\n\r\n//     </Container>\r\n// });\r\n\r\nconst More = ({ kanban }: { kanban: Kanban }) => {\r\n    const { mutateAsync } = useDeleteKanban(useKanbansQueryKey())\r\n    const startEdit = () => {\r\n        Modal.confirm({\r\n            okText: 'Yes',\r\n            cancelText: 'No',\r\n            title: 'are you sure to delete the project screen?',\r\n            onOk() {\r\n                mutateAsync({ id: kanban.id })\r\n            }\r\n        })\r\n    }\r\n\r\n    const overlay = <Menu>\r\n        <Menu.Item>\r\n            <Button onClick={startEdit} type={'link'}>delete</Button>\r\n        </Menu.Item>\r\n    </Menu>\r\n\r\n    return <Dropdown overlay={overlay}>\r\n        <Button type={'link'}>...</Button>\r\n    </Dropdown>\r\n}\r\n\r\nexport const Container = styled.div`\r\n min-width: 27rem;\r\n border-radius: 6px;\r\n background-color: rgb(244, 245, 247);\r\n display: flex;\r\n flex-direction: column;\r\n padding: 0.7rem 0.7rem 1rem;\r\n margin-right: 1.5rem;\r\n`\r\n\r\nconst TasksContainer = styled.div`\r\n overflow:scroll;\r\n flex: 1;\r\n ::-webkit-scrollbar {\r\n    display: none;\r\n }\r\n`","export default \"data:image/png;base64,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\"","import React from 'react'\r\nimport { useState } from \"react\"\r\nimport { useProjects } from \"utils/project\"\r\nimport { useKanbansQueryKey, useProjectIdInUrl } from \"./util\"\r\nimport { useAddKanban } from \"utils/kanban\"\r\nimport { ColumnsContainer } from \"./index\"\r\nimport { Container } from './kanban-column'\r\nimport { Input } from \"antd\"\r\n\r\nexport const CreateKanban = () => {\r\n    const [name, setName] = useState('')\r\n    const projectId = useProjectIdInUrl().id\r\n    const { mutateAsync: addKanban } = useAddKanban(useKanbansQueryKey())\r\n\r\n    const submit = async () => {\r\n        await addKanban({ name, projectId })\r\n        setName('')\r\n    }\r\n\r\n    return <Container>\r\n        <Input size={\"large\"} placeholder={\"create the project screen\"} onPressEnter={submit} value={name}\r\n            onChange={evt => setName(evt.target.value)}\r\n        />\r\n    </Container>\r\n}","import { useForm } from \"antd/es/form/Form\";\r\nimport React from \"react\";\r\nimport { useTasksModal, useTasksQueryKey } from \"./util\";\r\nimport { useDeleteTask, useEditTask } from \"utils/task\";\r\nimport { useEffect } from 'react';\r\nimport { Button, Form, Input, Modal } from \"antd\";\r\nimport { UserSelect } from \"components/user-select\";\r\nimport { Kanban } from '../../types/kanban';\r\nimport { TaskTypeSelect } from \"components/task-type-select\";\r\n\r\nconst layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 }\r\n}\r\n\r\nexport const TaskModal = () => {\r\n    const [form] = useForm()\r\n    const { editingTaskId, editingTask, close } = useTasksModal()\r\n    const { mutateAsync: editTask, isLoading: editLoading } = useEditTask(useTasksQueryKey())\r\n    const { mutate: deleteTask } = useDeleteTask(useTasksQueryKey());\r\n    const onCancel = () => {\r\n        close()\r\n        form.resetFields()\r\n    }\r\n\r\n    const onOk = async () => {\r\n        await editTask({ ...editingTask, ...form.getFieldsValue() })\r\n        close()\r\n    }\r\n\r\n    const startDelete = () => {\r\n        close()\r\n        Modal.confirm({\r\n            okText: 'Yes',\r\n            cancelText: 'Cancel',\r\n            title: 'are you sure to delete the task?',\r\n            onOk() {\r\n                return deleteTask({ id: Number(editingTaskId) })\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        form.setFieldsValue(editingTask)\r\n    }, [form, editingTask])\r\n\r\n    return <Modal\r\n        forceRender={true}\r\n        onCancel={onCancel}\r\n        onOk={onOk}\r\n        okText={'Yes'}\r\n        cancelText={'cancel'}\r\n        confirmLoading={editLoading}\r\n        title={'edit Task'}\r\n        visible={!!editingTaskId}>\r\n        <Form {...layout} initialValues={editingTask} form={form}>\r\n            <Form.Item label={'task_name'} name={'name'} rules={[{ required: true, message: 'please input the task name' }]}>\r\n                <Input />\r\n            </Form.Item>\r\n            <Form.Item label={'administrator'} name={'processorId'}>\r\n                <UserSelect defaultOptionName={'administrator'} ></UserSelect>\r\n            </Form.Item>\r\n            <Form.Item label={'kind'} name={'typeId'} >\r\n                <TaskTypeSelect />\r\n            </Form.Item>\r\n            <div style={{ textAlign: 'right' }}>\r\n                <Button onClick={startDelete} style={{ fontSize: '14px' }} size={\"small\"}>delete</Button>\r\n            </div>\r\n        </Form>\r\n\r\n    </Modal>\r\n}","import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { useKanbans, useReorderKanban } from \"utils/kanban\";\r\nimport { useKanbanSearchParams, useKanbansQueryKey, useProjectIdInUrl, useProjectInUrl, useTasksQueryKey, useTasksSearchParams } from './util';\r\nimport styled from \"@emotion/styled\";\r\nimport { SearchPanel } from \"./search-panel\";\r\nimport { ScreenContainer } from \"components/lib\";\r\nimport { useReorderTask, useTasks } from \"utils/task\";\r\nimport { Spin } from \"antd\";\r\nimport { CreateKanban } from \"./create-kanban\";\r\nimport { TaskModal } from \"./task-modal\";\r\nimport { DragDropContext, DropResult } from \"react-beautiful-dnd\";\r\nimport { Drag, Drop, DropChild } from \"components/drag-and-drop\";\r\nimport { KanbanColumn } from \"./kanban-column\";\r\nimport { useCallback } from 'react';\r\n\r\n\r\nexport const KanbanScreen = () => {\r\n\r\n\r\n  const { data: currentProject } = useProjectInUrl()\r\n  const { data: kanbans, isLoading: kanbanIsLoading } = useKanbans(useKanbanSearchParams())\r\n  const { isLoading: taskIsLoading } = useTasks(useTasksSearchParams());\r\n  const isLoading = taskIsLoading || kanbanIsLoading\r\n\r\n  // return (\r\n  //   <div>\r\n  //     <h3>{currentProject?.name}</h3>\r\n  //     {\r\n  //       kanbans?.map(kanban => <div key={kanban.id}>\r\n  //          {kanban.name}\r\n  //       </div>)\r\n  //     }\r\n  //   </div>\r\n  // )\r\n  return (\r\n\r\n    <ScreenContainer>\r\n      <Helmet>\r\n        <title>noticeboard</title>\r\n      </Helmet >\r\n      <SearchPanel ></SearchPanel>\r\n      <h1>{currentProject?.name} ProjectScreen</h1>\r\n      {isLoading ? <Spin size={\"large\"}></Spin> :\r\n\r\n        <ColumnsContainer>    \r\n              {\r\n                kanbans?.map((kanban, index) => (\r\n                 \r\n                    <KanbanColumn kanban={kanban} key={kanban.id} />\r\n\r\n                ))\r\n\r\n              }\r\n          <CreateKanban />\r\n        </ColumnsContainer>\r\n\r\n\r\n      }\r\n      <TaskModal />\r\n    </ScreenContainer>\r\n  )\r\n  // return (\r\n  //   <DragDropContext onDragEnd={useDragEnd}>\r\n  //     <ScreenContainer>\r\n  //       <Helmet>\r\n  //         <title>请登录或注册以继续</title>\r\n  //       </Helmet >\r\n  //       <SearchPanel ></SearchPanel>\r\n  //       {/* <h1>{currentProject?.name}看板</h1> */}\r\n  //       {isLoading ? <Spin size={\"large\"}></Spin> :\r\n\r\n  //         <ColumnsContainer>\r\n  //           <Drop type={'COLUMN'} direction={'horizontal'} droppableId={'kanban'}>\r\n  //             <DropChild style={{ display: 'flex' }}>\r\n  //               {\r\n  //                 kanbans?.map((kanban, index) => (\r\n  //                   <Drag key={kanban.id} draggableId={'kanban' + kanban.id} index={index}>\r\n  //                     <KanbanColumn kanban={kanban} key={kanban.id} />\r\n  //                   </Drag>\r\n\r\n  //                 ))\r\n\r\n  //               }\r\n  //             </DropChild>\r\n  //           </Drop>\r\n  //           <CreateKanban />\r\n  //         </ColumnsContainer>\r\n\r\n\r\n  //       }\r\n  //       <TaskModal />\r\n  //     </ScreenContainer>;\r\n  //   </DragDropContext>)\r\n};\r\n\r\nexport const useDragEnd = () => {\r\n  const { data: kanbans } = useKanbans(useKanbanSearchParams())\r\n  const { mutate: reorderKanban } = useReorderKanban(useKanbansQueryKey())\r\n  const { data: allTasks = [] } = useTasks(useTasksSearchParams())\r\n  const { data: reorderTask } = useReorderTask(useTasksQueryKey())\r\n  return useCallback(({ source, destination, type }: DropResult) => {\r\n    if (!destination) {\r\n      return\r\n    }\r\n    if (type === 'COLUMN') {\r\n      const fromId = kanbans?.[source.index].id\r\n      const toId = kanbans?.[destination.index].id\r\n      if (!fromId || !toId || fromId === toId) {\r\n        return\r\n      }\r\n      const type = destination.index > source.index ? 'after' : 'before'\r\n      reorderKanban({ fromId, referenceId: toId, type })\r\n\r\n    }\r\n\r\n    if (type === 'ROW') {\r\n      const fromKanbanId = +source.droppableId;\r\n      const toKanbanId = +destination.droppableId;\r\n      if (fromKanbanId === toKanbanId) {\r\n        return\r\n      }\r\n      const fromTask = allTasks?.filter(task => task.kanbanId === fromKanbanId)[source.index]\r\n      const toTask = allTasks.filter(task => task.kanbanId === toKanbanId)[destination.index]\r\n      if (fromTask.id === toTask.id) {\r\n        return\r\n      }\r\n      reorderTask({\r\n        fromId: fromTask?.id,\r\n        referenceId: toTask?.id,\r\n        fromKanbanId,\r\n        toKanbanId,\r\n        type: fromKanbanId === toKanbanId && destination.index > source.index ? 'after' : 'before'\r\n      })\r\n\r\n    }\r\n  }, [kanbans, reorderKanban, allTasks, reorderTask])\r\n}\r\n\r\nconst Main = styled.div`\r\nbox-shadow: -5px 0 5px -5px rgba(0,0,0,.1);\r\ndisplay: flex;\r\n`\r\n\r\nexport const ColumnsContainer = styled('div')`\r\ndisplay: flex;\r\noverflow-x: scroll;\r\nflex: 1;\r\n`","import { useLocation } from \"react-router\"\r\nimport { useProject } from \"utils/project\"\r\n\r\nexport const useProjectIdInUrl = () => {\r\n    const { pathname } = useLocation()\r\n    const id = pathname.match(/projects\\/(\\d+)/)?.[1]\r\n    return  Number(id)\r\n    \r\n}\r\nexport const useProjectInUrl = () => useProject(useProjectIdInUrl())\r\n\r\nexport const useEpicSearchParams = () => ({ projectId: useProjectIdInUrl() })\r\n\r\nexport const useEpicsQueryKey = () => ['epics', useEpicSearchParams()]","import React from 'react'\r\nimport {Button, Drawer, Form, Input, Spin} from 'antd';\r\nimport { DrawerProps } from 'antd/es/drawer';\r\nimport styled from '@emotion/styled';\r\nimport { useAddEpic } from 'utils/epic';\r\nimport { useEpicsQueryKey, useProjectIdInUrl } from './util';\r\nimport { ErrorBox } from 'components/lib';\r\nimport { UserSelect } from 'components/user-select';\r\nimport { useForm } from 'antd/es/form/Form';\r\nimport { useEffect } from 'react';\r\nimport TextArea from 'antd/es/input/TextArea';\r\n\r\nexport const CreateEpic = (props: Pick<DrawerProps, 'visible'> & {onClose:() =>void}) => {\r\n\r\n    const {mutate: addEpic, isLoading, error} = useAddEpic(useEpicsQueryKey());\r\n    const [form] = useForm()\r\n    const projectId = useProjectIdInUrl()\r\n    const onFinish = async (values: any) => {\r\n        await addEpic({...values, projectId})\r\n        props.onClose()\r\n    }\r\n    useEffect(() => {\r\n       form.resetFields()\r\n    },[form, props.visible])\r\n    return <Drawer\r\n    visible={props.visible}\r\n    onClose={props.onClose}\r\n    forceRender={true}\r\n    destroyOnClose={true}\r\n    width={'100%'}\r\n    >\r\n      <Container>\r\n      {isLoading ? (\r\n          <Spin size={\"large\"}></Spin>\r\n        ) : (\r\n          <>\r\n            <h1>create description</h1>\r\n            <ErrorBox error={error} ></ErrorBox>\r\n            <Form\r\n              form={form}\r\n              layout={\"vertical\"}\r\n              style={{ width: \"40rem\" }}\r\n              onFinish={onFinish}\r\n            >\r\n              <Form.Item\r\n                label={\"description\"}\r\n                name={\"name\"}\r\n                rules={[{ required: true, message: \"please input description\" }]}\r\n              >\r\n                {/* <Input placeholder={\"please input epic name\"}></Input> */}\r\n                <TextArea size=\"large\" placeholder={\"please input description\"}></TextArea>\r\n              </Form.Item>\r\n              <Form.Item style={{ textAlign: \"right\" }}>\r\n                <Button\r\n                  loading={isLoading }\r\n                  type={\"primary\"}\r\n                  htmlType={\"submit\"}\r\n                >\r\n                  submit\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </>\r\n        )}\r\n      </Container>\r\n    </Drawer>\r\n}\r\n\r\nexport const Container = styled.div`\r\n  height: 80vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`","import { useAsync } from \"./use-async\";\r\nimport { Project } from \"screens/project-list/list\";\r\nimport { useEffect } from \"react\";\r\nimport { cleanObject } from \"utils\";\r\nimport { useHttp } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useProjectsSearchParams } from \"screens/project-list/util\";\r\nimport {\r\n    useAddConfig,\r\n    useDeleteConfig,\r\n    useEditConfig,\r\n    useReorderConfig,\r\n} from \"./use-optimistic-options\";\r\nimport { Task } from \"types/task\";\r\nimport { Epic } from \"types/epic\";\r\n\r\nexport const useEpics = (param?: Partial<Epic>) => {\r\n    const client = useHttp();\r\n\r\n    return useQuery<Epic[], Error>([\"epics\", param], () =>\r\n        // [\"project\", param] 意思是当projects字符串变化或者param变化时，重新调用第二个参数的() => {}该方法, 但是projects字符串是个名字，相当于\r\n        //缓存的key名，所以发生变化的主要是param，每当请求参数变化时，就发生第二个参数的函数调用\r\n        client(\"epics\", { data: cleanObject(param || {}) }),\r\n    );\r\n};\r\n\r\nexport const useAddEpic = (queryKey: QueryKey) => {\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation(\r\n        (params: Partial<Epic>) =>\r\n            client(`epics`, {\r\n                data: params,\r\n                method: \"POST\",\r\n            }),\r\n        useAddConfig(queryKey));\r\n}\r\n\r\n\r\n\r\nexport const useDeleteEpic = (queryKey: QueryKey) => {\r\n    const client = useHttp();\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation(\r\n        ({ id }: { id: number }) =>\r\n            client(`epics/${id}`, {\r\n                method: \"DELETE\",\r\n            }),\r\n        useDeleteConfig(queryKey));\r\n}\r\n\r\n","import React, { useState } from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { useDeleteEpic, useEpics, } from \"utils/epic\";\r\nimport { useEpicSearchParams, useEpicsQueryKey, useProjectIdInUrl, useProjectInUrl } from './util';\r\nimport styled from \"@emotion/styled\";\r\nimport { ScreenContainer } from \"components/lib\";\r\nimport { useReorderTask, useTasks } from \"utils/task\";\r\nimport { Button, List, Modal, Row, Spin } from \"antd\";\r\n\r\nimport { useCallback } from 'react';\r\nimport dayjs from \"dayjs\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { CreateEpic } from \"./create-epic\";\r\nimport { Epic } from \"types/epic\";\r\nexport const EpicScreen = () => {\r\n\r\n  const { data: currentProject } = useProjectInUrl()\r\n  const { data: epics, isLoading: epicIsLoading } = useEpics(useEpicSearchParams())\r\n  const { data: tasks } = useTasks({ projectId: currentProject?.id })\r\n  const { mutate: deleteEpic } = useDeleteEpic(useEpicsQueryKey());\r\n  const [epicCreateOpen, setEpicCreateOpen] = useState(false);\r\n  const confirmDeleteEpic = (epic: Epic) => {\r\n    Modal.confirm({\r\n      okText: 'Yes',\r\n      cancelText: 'No',\r\n      title: 'make sure to delete the description?',\r\n      onOk() {\r\n        deleteEpic({ id: epic.id })\r\n      }\r\n    })\r\n  }\r\n  return (\r\n\r\n    <ScreenContainer>\r\n      <Row justify=\"space-between\">\r\n        <h1>{currentProject?.name} description</h1>\r\n        <Button onClick={() => setEpicCreateOpen(true)} type={'link'}>create description</Button>\r\n      </Row>\r\n\r\n      <List style={{ overflow: 'scroll' }} dataSource={epics} itemLayout={'vertical'} renderItem={epic => (<List.Item>\r\n        <List.Item.Meta title={<Row justify=\"space-between\">\r\n          <span>\r\n            {epic.name}\r\n          </span>\r\n          <Button type={'link'} onClick={() => confirmDeleteEpic(epic)}>delete</Button>\r\n\r\n        </Row>}\r\n          description={<div>\r\n            <div>start_time: {dayjs(epic.start).format('YYYY-MM-DD')}</div>\r\n            <div>end_time: {dayjs(epic.end).format('YYYY-MM-DD')}</div>\r\n          </div>}>\r\n        </List.Item.Meta>\r\n        <div>\r\n          {tasks?.filter(task => task.epicId === epic.id).map(task => <Link to={`/projects/${currentProject?.id}/kanban?editingTaskId=${task.id}`} key={task.id}>{task.name}</Link>)}\r\n        </div>\r\n      </List.Item>)} />\r\n      <CreateEpic onClose={() => setEpicCreateOpen(false)} visible={epicCreateOpen} />\r\n    </ScreenContainer>\r\n  )\r\n\r\n};","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Routes, Route, Navigate, useLocation } from \"react-router\";\r\nimport { KanbanScreen } from \"screens/kanban\";\r\nimport { EpicScreen } from \"screens/epic\";\r\nimport styled from \"@emotion/styled\";\r\nimport { ScreenContainer } from \"components/lib\";\r\nimport { Menu } from \"antd\";\r\n\r\nconst useRouteType = () => {\r\n  const units = useLocation().pathname.split('/');\r\n  return units[units.length - 1]\r\n}\r\n\r\nexport const ProjectScreen = () => {\r\n  const routeType = useRouteType()\r\n  return (\r\n    <Container>\r\n      <Aside>\r\n        <Menu mode={\"inline\"} selectedKeys={[routeType]}>\r\n          <Menu.Item key={'kanban'}>\r\n            <Link to={\"kanban\"}>projectScreen</Link>\r\n          </Menu.Item>\r\n          <Menu.Item key={'epic'}>\r\n            <Link to={\"epic\"}>task description</Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Aside>\r\n      <Main>\r\n        <Routes>\r\n          {/*projects/:projectId/kanban*/}\r\n          <Route path={\"kanban\"} element={<KanbanScreen />}></Route>\r\n          {/*projects/:projectId/epic*/}\r\n          <Route path={\"epic\"} element={<EpicScreen />}></Route>\r\n          {/*  默认路由 */}\r\n          <Route path=\"*\" element={<Navigate to={window.location.pathname + \"/kanban\"} replace={true}/>} />  \r\n          {/* <Navigate to={window.location.pathname + \"/kanban\"} replace={true}></Navigate> */}\r\n        </Routes>\r\n      </Main>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst Aside = styled.aside`\r\n background-color: rgb(244, 245, 247);\r\n display: flex;\r\n`\r\n\r\nconst Main = styled.div`\r\nbox-shadow: -5px 0 5px -5px rgba(0,0,0,.1);\r\ndisplay: flex;\r\noverflow: hidden;\r\n`\r\nconst Container = styled.div`\r\n display: grid;\r\n grid-template-columns: 16rem 1fr;\r\n width: 100%;\r\n\r\n`","import React, { useEffect } from \"react\";\r\nimport { Drawer, Button, Spin, Form, Input } from \"antd\";\r\nimport { useProjectModal, useProjectsQueryKey } from \"./util\";\r\nimport { UserSelect } from \"components/user-select\";\r\nimport { useAddProject, useEditProject } from \"utils/project\";\r\nimport { useForm } from \"antd/es/form/Form\";\r\nimport styled from \"@emotion/styled\";\r\nimport { ErrorBox } from \"components/lib\";\r\n\r\nexport const ProjectModal = () => {\r\n  const { projectModalOpen, close, editingProject, isLoading } = useProjectModal();\r\n  const title = editingProject ? \"edit project\" : \"create project\";\r\n  const useMutateProject = editingProject ? useEditProject : useAddProject;\r\n  const {\r\n    mutateAsync,\r\n    error,\r\n    isLoading: mutateLoading,\r\n  } = useMutateProject(useProjectsQueryKey());\r\n  const [form] = useForm();\r\n  const onFinish = (values: any) => {\r\n    mutateAsync({ ...editingProject, ...values }).then(() => {\r\n      form.resetFields();\r\n      close();\r\n      // window.location.reload();\r\n    });\r\n  };\r\n  const closeModal = () => {\r\n    form.resetFields()\r\n    console.log('没关闭吗')\r\n    close()\r\n  }\r\n  useEffect(() => {\r\n    form.setFieldsValue(editingProject);\r\n  }, [editingProject, form]);\r\n  return (\r\n    \r\n    <Drawer\r\n      forceRender={true}\r\n      onClose={closeModal}\r\n      visible={projectModalOpen}\r\n      width={\"100%\"}\r\n    >\r\n      <Container>\r\n        {isLoading ? (\r\n          <Spin size={\"large\"}></Spin>\r\n        ) : (\r\n          <>\r\n            <h1>{title}</h1>\r\n            <ErrorBox error={error} ></ErrorBox>\r\n            <Form\r\n              form={form}\r\n              layout={\"vertical\"}\r\n              style={{ width: \"40rem\" }}\r\n              onFinish={onFinish}\r\n            >\r\n              <Form.Item\r\n                label={\"name\"}\r\n                name={\"name\"}\r\n                rules={[{ required: true, message: \"please input project's name\" }]}\r\n              >\r\n                <Input placeholder={\"please input project's name\"}></Input>\r\n              </Form.Item>\r\n              <Form.Item\r\n                label={\"organization\"}\r\n                name={\"organization\"}\r\n                rules={[{ required: true, message: \"please input organization's name\" }]}\r\n              >\r\n                <Input placeholder={\"please input organization's name\"}></Input>\r\n              </Form.Item>\r\n              <Form.Item label={\"administrator\"} name={\"personId\"}>\r\n                <UserSelect defaultOptionName={\"administrator\"}></UserSelect>\r\n              </Form.Item>\r\n              <Form.Item style={{ textAlign: \"right\" }}>\r\n                <Button\r\n                  loading={mutateLoading}\r\n                  type={\"primary\"}\r\n                  htmlType={\"submit\"}\r\n                >\r\n                  submit\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </>\r\n        )}\r\n      </Container>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  flex-direction: column;\r\n  height: 80vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n","import React from \"react\";\r\nimport { Popover, Typography, List, Divider, Button } from \"antd\";\r\nimport { useProjects } from \"utils/project\";\r\nimport styled from \"@emotion/styled\";\r\nimport { ButtonNoPadding } from \"./lib\";\r\nimport { useProjectModal } from \"screens/project-list/util\";\r\n\r\nexport const ProjectPopover = () => {\r\n  const { open } = useProjectModal();\r\n  const { data: projects, isLoading, refetch } = useProjects();\r\n  const pinnedProjects = projects?.filter((project) => project.pin);\r\n  const content = (\r\n    <ContentContainer>\r\n      <Typography.Text type={\"secondary\"}>collect project</Typography.Text>\r\n      <List>\r\n        {pinnedProjects?.map((project) => (\r\n          <List.Item key={project.id}>\r\n            <List.Item.Meta title={project.name} />\r\n          </List.Item>\r\n        ))}\r\n      </List>\r\n      <Divider></Divider>\r\n      <ButtonNoPadding onClick={open} style={{ padding: 0 }} type={\"link\"}>\r\n        create project\r\n      </ButtonNoPadding>\r\n    </ContentContainer>\r\n  );\r\n  return (\r\n    <Popover onVisibleChange={() => refetch()} placement={\"bottom\"} content={content}>\r\n      <BigText>Project</BigText>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nconst ContentContainer = styled.div`\r\n  min-width: 30rem;\r\n`;\r\n\r\nconst BigText = styled.span`\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n`\r\n","import React from \"react\";\r\nimport { Popover, Typography, List, Divider, Button } from \"antd\";\r\nimport { useProjects } from \"utils/project\";\r\nimport styled from \"@emotion/styled\";\r\nimport { ButtonNoPadding } from \"./lib\";\r\nimport { useProjectModal } from \"screens/project-list/util\";\r\nimport { useAddUsers, useUsers } from \"utils/user\";\r\nimport { useEffect, useState } from 'react';\r\nimport { Card, Input } from 'antd';\r\n\r\nconst CreateUser = () => {\r\n    \r\n    const {mutate: addUser, isLoading, error} = useAddUsers(['users'])\r\n    const [name, setName] = useState('')\r\n    const [inputMode, setInputMode] = useState(false);\r\n\r\n    const submit = async () => {\r\n        await addUser({\"id\": 123, name})\r\n        setInputMode(false)\r\n        setName('')\r\n    }\r\n    const toggle = () => setInputMode(mode => !mode)\r\n\r\n    useEffect(() => {\r\n        if (!inputMode) {\r\n            setName('')\r\n        }\r\n    }, [inputMode])\r\n\r\n    if (!inputMode) {\r\n        return <div onClick={toggle}>+ ceate a new user</div>\r\n    }\r\n\r\n    return <Card>\r\n        <Input onBlur={toggle} placeholder={'write a username'} autoFocus={true} onPressEnter={submit}\r\n            value={name} onChange={evt => setName(evt.target.value)}\r\n        />\r\n    </Card>\r\n}\r\n\r\nexport const UserPopover = () => {\r\n\r\n    const { data: users, refetch } = useUsers()\r\n    const content = (\r\n        <ContentContainer>\r\n            <Typography.Text type={\"secondary\"}>users' list</Typography.Text>\r\n            <List>\r\n                {users?.map((user) => (\r\n                    <List.Item key={user.id}>\r\n                        <List.Item.Meta title={user.name} />\r\n                    </List.Item>\r\n                ))}\r\n            </List>\r\n            <Divider></Divider>\r\n            <CreateUser />\r\n            {/* <ButtonNoPadding onClick={open} style={{ padding: 0 }} type={\"link\"}>\r\n                create Users\r\n            </ButtonNoPadding> */}\r\n        </ContentContainer>\r\n    );\r\n    return (\r\n        <Popover onVisibleChange={() => refetch()} placement={\"bottom\"} content={content}>\r\n            <BigText>User</BigText>\r\n        </Popover>\r\n    );\r\n};\r\n\r\nconst ContentContainer = styled.div`\r\n  min-width: 30rem;\r\n`;\r\n\r\nconst BigText = styled.span`\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n`\r\n","export default \"data:image/png;base64,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\"","import React from \"react\";\r\nimport { useAuth } from \"context/auth-context\";\r\nimport { ProjectListScreen } from \"screens/project-list\";\r\nimport { ButtonNoPadding, Row } from \"components/lib\";\r\nimport { Dropdown, Menu, Button, Image } from \"antd\";\r\nimport { Route, Routes, Navigate } from \"react-router\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { ProjectScreen } from \"screens/project\";\r\nimport { resetRoute } from \"utils\";\r\nimport { ProjectModal } from \"screens/project-list/project-modal\";\r\nimport { useState } from \"react\";\r\nimport { ProjectPopover } from \"components/project-popover\";\r\nimport { useDispatch } from 'react-redux'\r\nimport { UserPopover } from \"components/user-popover\";\r\nimport cubicLogo from \"./assets/cubic.png\"\r\nimport styled from \"@emotion/styled\";\r\n\r\n\r\nexport const AuthenticatedApp = () => {\r\n  return (\r\n    <Container>\r\n      <Router>\r\n        <PageHeader ></PageHeader>\r\n        <Main>\r\n          {/* <ProjectListScreen /> */}\r\n\r\n          <Routes>\r\n            {/* <Route\r\n                path={\"/\"}\r\n                element={\r\n                  <ProjectListScreen />\r\n                }\r\n              ></Route> */}\r\n            <Route\r\n              path={\"/projects\"}\r\n              element={\r\n                <ProjectListScreen />\r\n              }\r\n            ></Route>\r\n            <Route\r\n              path={\"/projects/:projectId/*\"}\r\n              element={<ProjectScreen />}\r\n            ></Route>\r\n            <Route path=\"*\" element={<Navigate to=\"/projects\" replace={true} />} />\r\n          </Routes>\r\n\r\n\r\n          <ProjectModal ></ProjectModal>\r\n          {/* <ProjectModal\r\n          projectModalOpen={projectModalOpen}\r\n          onClose={() => setProjectModalOpen}\r\n        ></ProjectModal> */}\r\n        </Main>\r\n      </Router>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst PageHeader = () => {\r\n  const { logout, user } = useAuth();\r\n  return (\r\n    <Header between={true}>\r\n      <HeaderLeft gap={true}>\r\n        <img src={cubicLogo} style={{ width: 30, height: 30, marginTop: -5 }} />\r\n        <ButtonNoPadding type={\"link\"} onClick={resetRoute}>\r\n          <MiddleText>Cubic Software</MiddleText>\r\n        </ButtonNoPadding>\r\n        <ProjectPopover ></ProjectPopover>\r\n        <UserPopover />\r\n      </HeaderLeft>\r\n      <HeaderRight>\r\n        <User />\r\n      </HeaderRight>\r\n    </Header>\r\n  );\r\n};\r\n\r\nconst User = () => {\r\n  const { logout, user } = useAuth();\r\n  return (\r\n    <Dropdown\r\n      overlay={\r\n        <Menu>\r\n          <Menu.Item key={\"logou\"}>\r\n            <Button type={\"link\"} onClick={logout}>\r\n              logOut\r\n            </Button>\r\n          </Menu.Item>\r\n        </Menu>\r\n      }\r\n    >\r\n      <Button type={\"link\"} onClick={(e) => e.preventDefault()}>\r\n        Hi, {user?.name}\r\n      </Button>\r\n    </Dropdown>\r\n  );\r\n};\r\n\r\nconst HeaderItem = styled.h3`\r\n  margin-right: 3rem;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-rows: 6rem 1fr;\r\n  height:100vh;\r\n\r\n`;\r\n\r\nconst Header = styled(Row)`\r\n  padding: 3.2rem;\r\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\r\n  z-index: 1;\r\n  display:flex;\r\n  width:100%;\r\n`;\r\nconst HeaderLeft = styled(Row)`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 400px;\r\n`;\r\n\r\nconst HeaderRight = styled.div``;\r\nconst Main = styled.main`\r\ndisplay: flex;\r\noverflow: hidden;\r\n`;\r\n\r\nconst BigText = styled.span`\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n`\r\nconst MiddleText = styled.span`\r\n  font-size: 26px;\r\n  font-weight: bold;\r\n  line-height: 30px;\r\n`\r\n\r\nconst Nav = styled.nav``;\r\n\r\nconst Aside = styled.aside``;\r\n\r\nconst Footer = styled.footer``;\r\n\r\n\r\n// const Main = styled.main`\r\n// height: calc(100vh - 6rem)\r\n// `\r\n","import React, { FormEvent } from \"react\";\r\n\r\nimport * as qs from \"qs\";\r\nimport { useAuth } from \"context/auth-context\";\r\nimport { LongButton } from \"unauthenticated-app\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport { useAsync } from \"utils/use-async\";\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nexport const LoginScreen = ({\r\n  onError,\r\n}: {\r\n  onError: (error: Error) => void;\r\n}) => {\r\n  const { login, user } = useAuth();\r\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true });\r\n  const handleSubmit = async (values: {\r\n    username: string;\r\n    password: string;\r\n  }) => {\r\n    try {\r\n      await run(login(values));\r\n    } catch (e: any) {\r\n      onError(e);\r\n    }\r\n  };\r\n  return (\r\n    <Form onFinish={handleSubmit}>\r\n      <Form.Item\r\n        name={\"username\"}\r\n        rules={[{ required: true, message: \"please input username\" }]}\r\n      >\r\n        <Input placeholder={\"username\"} type=\"text\" id={\"username\"} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        name={\"password\"}\r\n        rules={[{ required: true, message: \"please input password\" }]}\r\n      >\r\n        <Input placeholder={\"password\"} type=\"password\" id={\"password\"} />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <LongButton loading={isLoading} htmlType={\"submit\"} type={\"primary\"}>\r\n          login\r\n        </LongButton>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n","import React, { FormEvent } from \"react\";\r\n\r\nimport * as qs from \"qs\";\r\nimport { useAuth } from \"context/auth-context\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport { LongButton } from \"unauthenticated-app\";\r\nimport { useAsync } from \"utils/use-async\";\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nexport const RegisterScreen = ({\r\n  onError,\r\n}: {\r\n  onError: (error: Error) => void;\r\n}) => {\r\n  const { register, user } = useAuth();\r\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true });\r\n  const handleSubmit = async ({\r\n    cpassword,\r\n    ...values\r\n  }: {\r\n    username: string;\r\n    password: string;\r\n    cpassword: string;\r\n  }) => {\r\n    if (cpassword !== values.password) {\r\n      onError(new Error(\"please make sure the passwords you input twice is the same\"));\r\n      return;\r\n    }\r\n    try {\r\n      await run(register(values));\r\n    } catch (e: any) {\r\n      onError(e);\r\n    }\r\n  };\r\n  return (\r\n    <Form onFinish={handleSubmit}>\r\n      <Form.Item\r\n        name={\"username\"}\r\n        rules={[{ required: true, message: \"please input username\" }]}\r\n      >\r\n        <Input placeholder={\"username\"} type=\"text\" id={\"username\"} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        name={\"password\"}\r\n        rules={[{ required: true, message: \"please input password\" }]}\r\n      >\r\n        <Input placeholder={\"password\"} type=\"password\" id={\"password\"} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        name={\"cpassword\"}\r\n        rules={[{ required: true, message: \"please confirm the password again\" }]}\r\n      >\r\n        <Input placeholder={\"confirm the password\"} type=\"password\" id={\"cpassword\"} />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <LongButton loading={isLoading} htmlType={\"submit\"} type={\"primary\"}>\r\n          register\r\n        </LongButton>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/left.e74de3ec.svg\";","export default __webpack_public_path__ + \"static/media/right.b423a6cf.svg\";","import { useState } from \"react\";\r\nimport { LoginScreen } from \"./login\";\r\nimport { RegisterScreen } from \"./register\";\r\nimport { Card, Divider, Button, Typography } from \"antd\";\r\nimport left from \"assets/left.svg\";\r\nimport right from \"assets/right.svg\";\r\nimport logo from \"assets/cubic.png\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { ErrorBox } from \"components/lib\";\r\nexport const UnauthenticatedApp = () => {\r\n  const [isRegister, setIsRegister] = useState(false);\r\n  const [error, setError] = useState<Error | null>(null);\r\n  return (\r\n    <Container style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n      <Helmet>\r\n        <title>cubic software</title>\r\n      </Helmet>\r\n      <Header>\r\n        Cubic Software\r\n      </Header>\r\n      \r\n      <Background />\r\n      {/* <Button\r\n        onClick={() => {\r\n          throw new Error(\"你好错误\");\r\n        }}\r\n      ></Button> */}\r\n      <ShadowCard>\r\n        <img src={logo} style={{width: 100, height: 100, marginBottom: 40}}/>\r\n        <Title>{isRegister ? \"Please Register\" : \"Please Login\"}</Title>\r\n        <ErrorBox error={error} />\r\n        {/* {error ? (\r\n          <Typography.Text type={\"danger\"}>{error.message}</Typography.Text>\r\n        ) : null} */}\r\n        {isRegister ? (\r\n          <RegisterScreen onError={setError}></RegisterScreen>\r\n        ) : (\r\n          <LoginScreen onError={setError}></LoginScreen>\r\n        )}\r\n        <Divider />\r\n\r\n        <Button type={\"link\"} onClick={() => setIsRegister(!isRegister)}>\r\n          {isRegister ? \"I need to login directly\" : \"create a new account\"}\r\n        </Button>\r\n      </ShadowCard>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport const LongButton = styled(Button)`\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  margin-bottom: 2.4rem;\r\n  color: rgb(94, 108, 132);\r\n`;\r\n\r\nconst Background = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  background-position:\r\n    left bottom,\r\n    right bottom;\r\n  background-size: calc(((100vw - 40rem) / 2) - 3.2rem),\r\n    calc(((100vw - 40rem) / 2) - 3.2rem), cover;\r\n  background-image: url(${left}), url(${right});\r\n`;\r\n\r\nconst Header = styled.header`\r\n  font-size: 10rem;\r\n  font-height: bold;\r\n  position: relative;\r\n  top: -10rem;\r\n`;\r\n\r\nconst ShadowCard = styled(Card)`\r\n  width: 40rem;\r\n  min-height: 56rem;\r\n  padding: 3.2rem 4rem;\r\n  border-radius: 0.3rem;\r\n  box-sizing: border-box;\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\r\n  text-align: center;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n`;\r\n","import React, { ReactNode } from \"react\";\r\nimport { FullPageErrorFallback } from \"./lib\";\r\n\r\ntype FallbackRender = (props: { error: Error | null }) => React.ReactElement;\r\n\r\nexport class ErrorBoundary extends React.Component<\r\n  { children: ReactNode; fallbackRender: FallbackRender },\r\n  { error: Error | null }\r\n> {\r\n  state = { error: null };\r\n\r\n  static getDerivedStateFromError(error: Error) {\r\n    return { error };\r\n  }\r\n\r\n  render() {\r\n    const { error } = this.state;\r\n    const { fallbackRender, children } = this.props;\r\n    if (error) {\r\n      return fallbackRender({ error });\r\n    }\r\n    return children;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport logo from \"./logo.svg\";\r\nimport \"./App.css\";\r\nimport { ProjectListScreen } from \"screens/project-list\";\r\nimport { LoginScreen } from \"screens/project-list/login\";\r\nimport { useAuth } from \"context/auth-context\";\r\nimport { AuthenticatedApp } from \"authenticated-app\";\r\nimport { UnauthenticatedApp } from \"unauthenticated-app\";\r\nimport { ErrorBoundary } from \"components/error-boundary\";\r\nimport { FullPageErrorFallback } from \"components/lib\";\r\n\r\nfunction App() {\r\n  const { user } = useAuth();\r\n  return (\r\n    <div className=\"App\">\r\n      <ErrorBoundary fallbackRender={FullPageErrorFallback}>\r\n        {user ? <AuthenticatedApp></AuthenticatedApp> : <UnauthenticatedApp />}\r\n      </ErrorBoundary>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from \"web-vitals\";\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { ReactNode } from \"react\";\r\nimport { AuthProvider } from \"./auth-context\";\r\nimport { QueryClientProvider, QueryClient } from \"react-query\";\r\nexport const AppProviders = ({ children }: { children: ReactNode }) => {\r\n  return (\r\n    <QueryClientProvider client={new QueryClient()}>\r\n      <AuthProvider>{children}</AuthProvider>\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n// import './index.css';\r\n\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n// import { loadDevTools } from 'jira-dev-tool'\r\nimport { loadServer, DevTools } from \"jira-dev-tool\";\r\n// import 'antd/dist/antd.less'\r\nimport { AppProviders } from \"context\";\r\n\r\n// const root = ReactDOM.createRoot(\r\n//   document.getElementById(\"root\") as HTMLElement,\r\n// );\r\n\r\nloadServer(() =>\r\n  ReactDOM.render(\r\n    <React.StrictMode>\r\n      <AppProviders>\r\n        <DevTools />\r\n        <App />\r\n      </AppProviders>\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n  ),\r\n);\r\n\r\n// root.render(\r\n//   <React.StrictMode>\r\n//     <App />\r\n//   </React.StrictMode>\r\n// );\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}